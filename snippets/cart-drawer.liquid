<style>
/* Compact Progress Bar */
  .achievement-progress {
    width: calc(100% + 32px);
    margin: 10px -16px;
    padding: 12px 16px;
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .achievement-title {
    color: #FFB030;
    font-family: Inter, sans-serif;
    font-size: 12px;
    font-weight: 700;
    text-align: center;
    margin: 0 0 8px 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

   .progress-track {
    position: relative;
    height: 6px;
    {% comment %} background: linear-gradient(90deg, #4CAF50 0%, #FF6B6B 0%); {% endcomment %}
    border-radius: 10px;
    margin: 10px 0;
    overflow: visible;
    transition: background 0.6s ease;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50 0%, #FFB030 50%, #FFC361 100%);
    border-radius: 10px;
    transition: width 0.6s ease, background 0.6s ease;
    position: relative;
    box-shadow: 0 0 8px rgba(76, 175, 80, 0.5);
  }
  
  .progress-fill.level-1 {
    background: linear-gradient(90deg, #66BB6A 0%, #81C784 100%);
    box-shadow: 0 0 10px rgba(102, 187, 106, 0.6);
  }
  
  .progress-fill.level-2 {
    background: linear-gradient(90deg, #4CAF50 0%, #66BB6A 100%);
    box-shadow: 0 0 10px rgba(76, 175, 80, 0.6);
  }
  
  .progress-fill.level-3 {
    background: linear-gradient(90deg, #FFA726 0%, #FFB74D 100%);
    box-shadow: 0 0 10px rgba(255, 167, 38, 0.6);
  }
  
  .progress-fill.level-4 {
    background: linear-gradient(90deg, #FF9800 0%, #FFA726 100%);
    box-shadow: 0 0 12px rgba(255, 152, 0, 0.6);
  }
  
  .progress-fill.level-5 {
    background: linear-gradient(90deg, #FF6F00 0%, #FF8F00 100%);
    box-shadow: 0 0 12px rgba(255, 111, 0, 0.7);
  }
  
  .progress-fill.level-6 {
    background: linear-gradient(90deg, #D84315 0%, #FF6F00 100%);
    box-shadow: 0 0 15px rgba(216, 67, 21, 0.8);
  }
  
  .progress-fill.max-level {
    background: linear-gradient(90deg, #FFD700 0%, #FFA500 50%, #FF6347 100%);
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.9);
    animation: shimmer 2s infinite;
  }
  
  @keyframes shimmer {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2); }
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;
    background: #FFB030;
    border-radius: 50%;
    border: 2px solid #1a1a1a;
    box-shadow: 0 0 10px rgba(253, 180, 60, 0.8);
  }

  .milestones {
    display: flex;
    justify-content: space-between;
    margin-top: -3px;
    margin-bottom: 8px;
  }

  .milestone {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
  }

  .milestone-marker {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.08);
    border: 2px solid #2d2d2d;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    transition: all 0.3s ease;
    z-index: 2;
    margin-top: -14px;
  }

  .milestone.active .milestone-marker {
    background: linear-gradient(135deg, #FDB43C 0%, #FFB030 100%);
    border-color: #FFB030;
    animation: pulse 1.5s infinite;
    box-shadow: 0 0 15px rgba(253, 180, 60, 0.6);
  }

  .milestone.completed .milestone-marker {
    background: #4CAF50;
    border-color: #4CAF50;
    box-shadow: 0 0 12px rgba(76, 175, 80, 0.5);
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
  }

  .milestone-amount {
    color: rgba(255, 255, 255, 0.5);
    font-size: 9px;
    font-weight: 600;
    margin-top: 4px;
    font-family: Inter, sans-serif;
  }

  .milestone.active .milestone-amount {
    color: #FFB030;
    font-weight: 700;
  }

  .milestone.completed .milestone-amount {
    color: #4CAF50;
  }

  .current-amount {
    text-align: center;
    color: #fff;
    font-size: 11px;
    margin-top: 6px;
    font-family: Inter, sans-serif;
    line-height: 1.4;
  }

  .current-amount .amount {
    font-weight: 700;
    font-size: 13px;
  }

  .next-goal {
    color: rgba(255, 255, 255, 0.65);
    font-size: 10px;
    margin-top: 3px;
  }

  @media screen and (max-width: 767px) {
    .achievement-progress {
      padding: 10px 12px;
      margin: 8px -16px;
    }
    
    .achievement-title {
      font-size: 11px;
      margin-bottom: 6px;
    }
    
    .milestone-marker {
      width: 24px;
      height: 24px;
      font-size: 12px;
      margin-top: -12px;
    }
    
    .milestone-amount {
      font-size: 8px;
      margin-top: 3px;
    }
    
    .current-amount {
      font-size: 10px;
    }
    
    .current-amount .amount {
      font-size: 12px;
    }
    
    .next-goal {
      font-size: 9px;
    }
  }
  .cart-drawer__empty-content .button {
    color: #fff !important;
}
  .cart-drawer .cart-item__image {
  border-radius: 15px;
}
.wow-text{
    display: flex;
    width: calc(100% + 32px);
    flex-direction: row;
    align-items: center;
    gap: 4px;
    background: rgb(29 29 29);
    margin: 10px -16px 15px -16px;
    padding: 0 15px;
}

  .wow-text h5{
    color: #fff;
    font-family: Inter;
    font-size: 16px;
    font-style: normal;
    font-weight: 700;
    line-height: 22px;
    padding-left: 5px;
    margin: 0;
  }
    .wow-text p{
    color: #fff;
    font-family: Inter;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    line-height: 22px;
  }

  .cart__ctas button {
    background-color: #000000;
}
   @media screen and (max-width: 767px){
     .wow-text h5{
       font-size: 14px;
     }
     .wow-text p{
           font-size: 14px;
     }
   }
  
</style>


{% comment %}
  Renders cart drawer

  Usage:
  {% render 'cart-drawer' %}
{% endcomment %}

{{ 'quantity-popover.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}

<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'quantity-popover.js' | asset_url }}" defer="defer"></script>

<style>
  .drawer {
    visibility: hidden;
  }
</style>

<cart-drawer class="drawer{% if cart == empty %} is-empty{% endif %}">
  <div id="CartDrawer" class="cart-drawer">
    <div id="CartDrawer-Overlay" class="cart-drawer__overlay" 
    onclick="this.closest('cart-drawer').close()"></div>
    <div
      class="drawer__inner gradient color-{{ settings.cart_color_scheme }}"
      role="dialog"
      aria-modal="true"
      aria-label="{{ 'sections.cart.title' | t }}"
      tabindex="-1"
    >
      {%- if cart == empty -%}
        <div class="drawer__inner-empty">
          <div class="cart-drawer__warnings center{% if settings.cart_drawer_collection != blank %} cart-drawer__warnings--has-collection{% endif %}">
            <div class="cart-drawer__empty-content">
              <h2 class="cart__empty-text">{{ 'sections.cart.empty' | t }}</h2>
              <button
                class="drawer__close"
                type="button"
                onclick="this.closest('cart-drawer').close()"
                aria-label="{{ 'accessibility.close' | t }}"
              >
                <span class="svg-wrapper">
                  {{- 'icon-close.svg' | inline_asset_content -}}
                </span>
              </button>
              <a href="{{ routes.all_products_collection_url }}" class="button">
                {{ 'general.continue_shopping' | t }}
              </a>

              {%- if shop.customer_accounts_enabled and customer == null -%}
                <p class="cart__login-title h3">{{ 'sections.cart.login.title' | t }}</p>
                <p class="cart__login-paragraph">
                  {{ 'sections.cart.login.paragraph_html' | t: link: routes.account_login_url }}
                </p>
              {%- endif -%}
            </div>
          </div>
          {%- if settings.cart_drawer_collection != blank -%}
            <div class="cart-drawer__collection">
              {% render 'card-collection', card_collection: settings.cart_drawer_collection, columns: 1 %}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}
      <div class="drawer__header">
        <h2 class="drawer__heading">{{ 'sections.cart.title' | t }}</h2>
        <button
          class="drawer__close"
          type="button"
          onclick="this.closest('cart-drawer').close()"
          aria-label="{{ 'accessibility.close' | t }}"
        >
          <span class="svg-wrapper">
            {{- 'icon-close.svg' | inline_asset_content -}}
          </span>
        </button>
      </div>
      <div class="wow-text" > <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
          <g clip-path="url(#clip0_468_801)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M13.2162 12.4899C9.56063 12.4899 6.60808 9.52566 6.60808 5.88184C6.60808 9.52566 3.64382 12.4899 0 12.4899C3.64382 12.4899 6.60808 15.4425 6.60808 19.0863C6.60808 15.4425 9.56063 12.4899 13.2162 12.4899Z" fill="url(#paint0_linear_468_801)"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.9999 15.8993C17.9964 15.8993 16.3796 14.2707 16.3796 12.2789C16.3796 14.2707 14.751 15.8993 12.7592 15.8993C14.751 15.8993 16.3796 17.5162 16.3796 19.5197C16.3796 17.5162 17.9964 15.8993 19.9999 15.8993ZM17.9144 4.88586C15.4774 4.88586 13.509 2.91749 13.509 0.480469C13.509 2.91749 11.5407 4.88586 9.10364 4.88586C11.5407 4.88586 13.509 6.85422 13.509 9.29125C13.509 6.85422 15.4774 4.88586 17.9144 4.88586Z" fill="#FFB030"/>
          </g>
          <defs>
          <linearGradient id="paint0_linear_468_801" x1="-3" y1="5" x2="12.5" y2="19" gradientUnits="userSpaceOnUse">
          <stop stop-color="#FDB43C"/>
          <stop offset="1" stop-color="#FFC361"/>
          </linearGradient>
          <clipPath id="clip0_468_801">
          <rect width="20" height="20" fill="white"/>
          </clipPath>
          </defs>
          </svg> 
            <h5> Ma Sha Allah! </h5>
            <P> Choices full of blessings!</P> 
          </div>
      <cart-drawer-items
        {% if cart == empty %}
          class=" is-empty"
        {% endif %}
      >
        <form
          action="{{ routes.cart_url }}"
          id="CartDrawer-Form"
          class="cart__contents cart-drawer__form"
          method="post"
        >
          
          <div id="CartDrawer-CartItems" class="drawer__contents js-contents">
            {%- if cart != empty -%}
              <div class="drawer__cart-items-wrapper">
                <table class="cart-items" role="table">
                  <thead role="rowgroup">
                    <tr role="row">
                      <th id="CartDrawer-ColumnProductImage" role="columnheader">
                        <span class="visually-hidden">{{ 'sections.cart.headings.image' | t }}</span>
                      </th>
                      <th
                        id="CartDrawer-ColumnProduct"
                        class="caption-with-letter-spacing"
                        scope="col"
                        role="columnheader"
                      >
                        {{ 'sections.cart.headings.product' | t }}
                      </th>
                      <th
                        id="CartDrawer-ColumnTotal"
                        class="right caption-with-letter-spacing"
                        scope="col"
                        role="columnheader"
                      >
                        {{ 'sections.cart.headings.total' | t }}
                      </th>
                      <th id="CartDrawer-ColumnQuantity" role="columnheader">
                        <span class="visually-hidden">{{ 'sections.cart.headings.quantity' | t }}</span>
                      </th>
                    </tr>
                  </thead>

                  <tbody role="rowgroup">
                    {%- for item in cart.items -%}
                      <tr id="CartDrawer-Item-{{ item.index | plus: 1 }}" class="cart-item" role="row">
                        <td class="cart-item__media" role="cell" headers="CartDrawer-ColumnProductImage">
                          {% if item.image %}
                            {% comment %} Leave empty space due to a:empty CSS display: none rule {% endcomment %}
                            <a href="{{ item.url }}" class="cart-item__link" tabindex="-1" aria-hidden="true"> </a>
                            <img
                              class="cart-item__image"
                              src="{{ item.image | image_url: width: 300 }}"
                              alt="{{ item.image.alt | escape }}"
                              loading="lazy"
                              width="150"
                              height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                            >
                          {% endif %}
                        </td>

                        <td class="cart-item__details" role="cell" headers="CartDrawer-ColumnProduct">
                          {%- if settings.show_vendor -%}
                            <p class="caption-with-letter-spacing light">{{ item.product.vendor }}</p>
                          {%- endif -%}

                          <a href="{{ item.url }}" class="cart-item__name h4 break">
                            {{- item.product.title | escape -}}
                          </a>

                          {%- if item.original_price != item.final_price -%}
                            <div class="cart-item__discounted-prices">
                              <span class="visually-hidden">
                                {{ 'products.product.price.regular_price' | t }}
                              </span>
                              <s class="cart-item__old-price product-option">
                                {{- item.original_price | money -}}
                              </s>
                              <span class="visually-hidden">
                                {{ 'products.product.price.sale_price' | t }}
                              </span>
                              <strong class="cart-item__final-price product-option">
                                {{ item.final_price | money }}
                              </strong>
                            </div>
                          {%- else -%}
                            <div class="product-option">
                              {{ item.original_price | money }}
                            </div>
                          {%- endif -%}

                          {%- if item.product.has_only_default_variant == false
                            or item.properties.size != 0
                            or item.selling_plan_allocation != null
                          -%}
                            <dl>
                              {%- if item.product.has_only_default_variant == false -%}
                                {%- for option in item.options_with_values -%}
                                  <div class="product-option">
                                    <dt>{{ option.name }}:</dt>
                                    <dd>
                                      {{ option.value -}}
                                      {%- unless forloop.last %}, {% endunless %}
                                    </dd>
                                  </div>
                                {%- endfor -%}
                              {%- endif -%}

                              {%- for property in item.properties -%}
                                {%- assign property_first_char = property.first | slice: 0 -%}
                                {%- if property.last != blank and property_first_char != '_' -%}
                                  <div class="product-option">
                                    <dt>{{ property.first }}:</dt>
                                    <dd>
                                      {%- if property.last contains '/uploads/' -%}
                                        <a
                                          href="{{ property.last }}"
                                          class="link"
                                          target="_blank"
                                          aria-describedby="a11y-new-window-message"
                                        >
                                          {{ property.last | split: '/' | last }}
                                        </a>
                                      {%- else -%}
                                        {{ property.last }}
                                      {%- endif -%}
                                    </dd>
                                  </div>
                                {%- endif -%}
                              {%- endfor -%}
                            </dl>

                            <p class="product-option">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                          {%- endif -%}

                          <ul
                            class="discounts list-unstyled"
                            role="list"
                            aria-label="{{ 'customer.order.discount' | t }}"
                          >
                            {%- for discount in item.line_level_discount_allocations -%}
                              <li class="discounts__discount">
                                {{- 'icon-discount.svg' | inline_asset_content -}}
                                {{ discount.discount_application.title }}
                              </li>
                            {%- endfor -%}
                          </ul>
                        </td>

                        <td class="cart-item__totals right" role="cell" headers="CartDrawer-ColumnTotal">
                          {%- render 'loading-spinner' -%}
                          <div class="cart-item__price-wrapper">
                            {%- if item.original_line_price != item.final_line_price -%}
                              <div class="cart-item__discounted-prices">
                                <span class="visually-hidden">
                                  {{ 'products.product.price.regular_price' | t }}
                                </span>
                                <s class="cart-item__old-price price price--end">
                                  {{ item.original_line_price | money }}
                                </s>
                                <span class="visually-hidden">
                                  {{ 'products.product.price.sale_price' | t }}
                                </span>
                                <span class="price price--end">
                                  {{ item.final_line_price | money }}
                                </span>
                              </div>
                            {%- else -%}
                              <span class="price price--end">
                                {{ item.original_line_price | money }}
                              </span>
                            {%- endif -%}

                            {%- if item.variant.available and item.unit_price_measurement -%}
                              <div class="unit-price caption">
                                <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                                {{ item.unit_price | money }}
                                <span aria-hidden="true">/</span>
                                <span class="visually-hidden"
                                  >&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span
                                >
                                {%- if item.unit_price_measurement.reference_value != 1 -%}
                                  {{- item.unit_price_measurement.reference_value -}}
                                {%- endif -%}
                                {{ item.unit_price_measurement.reference_unit }}
                              </div>
                            {%- endif -%}
                          </div>
                        </td>
                        {%- liquid
                          assign has_qty_rules = false
                          if item.variant.quantity_rule.increment > 1 or item.variant.quantity_rule.min > 1 or item.variant.quantity_rule.max != null
                            assign has_qty_rules = true
                          endif

                          assign has_vol_pricing = false
                          if item.variant.quantity_price_breaks.size > 0
                            assign has_vol_pricing = true
                          endif
                        -%}
                        <td
                          class="cart-item__quantity {% if has_qty_rules or has_vol_pricing %} cart-item__quantity--info{% endif %}"
                          role="cell"
                          headers="CartDrawer-ColumnQuantity"
                        >
                          <quantity-popover>
                            <div class="cart-item__quantity-wrapper quantity-popover-wrapper">
                              <div class="quantity-popover-container{% if has_qty_rules or has_vol_pricing %} quantity-popover-container--hover{% endif %}">
                                <quantity-input class="quantity cart-quantity">
                                  <button class="quantity__button" name="minus" type="button">
                                    <span class="visually-hidden">
                                      {{-
                                        'products.product.quantity.decrease'
                                        | t: product: item.product.title
                                        | escape
                                      -}}
                                    </span>
                                    <span class="svg-wrapper">
                                      {{- 'icon-minus.svg' | inline_asset_content -}}
                                    </span>
                                  </button>
                                  <input
                                    class="quantity__input"
                                    type="number"
                                    data-quantity-variant-id="{{ item.variant.id }}"
                                    name="updates[]"
                                    value="{{ item.quantity }}"
                                    {% # theme-check-disable %}
                                    data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
                                    min="0"
                                    data-min="{{ item.variant.quantity_rule.min }}"
                                    {% if item.variant.quantity_rule.max != null %}
                                      max="{{ item.variant.quantity_rule.max }}"
                                    {% endif %}
                                    step="{{ item.variant.quantity_rule.increment }}"
                                    {% # theme-check-enable %}
                                    aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                                    id="Drawer-quantity-{{ item.index | plus: 1 }}"
                                    data-index="{{ item.index | plus: 1 }}"
                                  >
                                  <button class="quantity__button" name="plus" type="button">
                                    <span class="visually-hidden">
                                      {{-
                                        'products.product.quantity.increase'
                                        | t: product: item.product.title
                                        | escape
                                      -}}
                                    </span>
                                    <span class="svg-wrapper">
                                      {{- 'icon-plus.svg' | inline_asset_content -}}
                                    </span>
                                  </button>
                                </quantity-input>
                              </div>
                              <cart-remove-button
                                id="CartDrawer-Remove-{{ item.index | plus: 1 }}"
                                data-index="{{ item.index | plus: 1 }}"
                              >
                                <button
                                  type="button"
                                  class="button button--tertiary cart-remove-button"
                                  aria-label="{{ 'sections.cart.remove_title' | t: title: item.title | escape }}"
                                  data-variant-id="{{ item.variant.id }}"
                                >
                                  <span class="svg-wrapper">
                                    {{- 'icon-remove.svg' | inline_asset_content -}}
                                  </span>
                                </button>
                              </cart-remove-button>
                            </div>
                            {%- if has_qty_rules or has_vol_pricing -%}
                              <button
                                type="button"
                                class="quantity-popover__info-button quantity-popover__info-button--icon-with-label button button--tertiary"
                                aria-expanded="false"
                              >
                                <span class="svg-wrapper">
                                  {{- 'icon-info.svg' | inline_asset_content -}}
                                </span>
                                <span>
                                  {%- if has_vol_pricing -%}
                                    {{ 'products.product.volume_pricing.note' | t }}
                                  {%- elsif has_qty_rules -%}
                                    {{ 'products.product.quantity.note' | t }}
                                  {%- endif -%}
                                </span>
                              </button>
                            {%- endif -%}
                            {%- if has_vol_pricing or has_qty_rules -%}
                              <div
                                class="cart-items__info global-settings-popup quantity-popover__info"
                                tabindex="-1"
                                hidden
                              >
                                {%- if has_qty_rules == false -%}
                                  <span class="volume-pricing-label caption">
                                    {{- 'products.product.volume_pricing.title' | t -}}
                                  </span>
                                {%- endif -%}
                                <div class="quantity__rules caption">
                                  {%- if item.variant.quantity_rule.increment > 1 -%}
                                    <span class="divider">
                                      {{-
                                        'products.product.quantity.multiples_of'
                                        | t: quantity: item.variant.quantity_rule.increment
                                      -}}
                                    </span>
                                  {%- endif -%}
                                  {%- if item.variant.quantity_rule.min > 1 -%}
                                    <span class="divider">
                                      {{-
                                        'products.product.quantity.min_of'
                                        | t: quantity: item.variant.quantity_rule.min
                                      -}}
                                    </span>
                                  {%- endif -%}
                                  {%- if item.variant.quantity_rule.max != null -%}
                                    <span class="divider">
                                      {{-
                                        'products.product.quantity.max_of'
                                        | t: quantity: item.variant.quantity_rule.max
                                      -}}
                                    </span>
                                  {%- endif -%}
                                </div>
                                <button
                                  class="button-close button button--tertiary"
                                  type="button"
                                  aria-label="{{ 'accessibility.close' | t }}"
                                >
                                  <span class="svg-wrapper">
                                    {{- 'icon-close.svg' | inline_asset_content -}}
                                  </span>
                                </button>
                                {%- if item.variant.quantity_price_breaks.size > 0 -%}
                                  <volume-pricing class="parent-display">
                                    <ul class="list-unstyled">
                                      <li>
                                        <span>{{ item.variant.quantity_rule.min }}+</span>
                                        <span>{{ item.variant.price | money_with_currency }}/ea</span>
                                      </li>
                                      {%- for price_break in item.variant.quantity_price_breaks -%}
                                        <li>
                                          <span>
                                            {{- price_break.minimum_quantity -}}
                                            <span aria-hidden="true">+</span></span
                                          >
                                          <span>{{ price_break.price | money_with_currency }}/ea</span>
                                        </li>
                                      {%- endfor -%}
                                    </ul>
                                  </volume-pricing>
                                {%- endif -%}
                              </div>
                            {%- endif -%}
                            <div
                              id="CartDrawer-LineItemError-{{ item.index | plus: 1 }}"
                              class="cart-item__error"
                              role="alert"
                            >
                              <small class="cart-item__error-text"></small>
                              <span class="svg-wrapper">
                                {{- 'icon-error.svg' | inline_asset_content -}}
                              </span>
                            </div>
                          </quantity-popover>
                        </td>
                      </tr>
                    {%- endfor -%}
                  </tbody>
                </table>
              </div>
            {%- endif -%}
            <p id="CartDrawer-LiveRegionText" class="visually-hidden" role="status"></p>
            <p id="CartDrawer-LineItemStatus" class="visually-hidden" aria-hidden="true" role="status">
              {{ 'accessibility.loading' | t }}
            </p>
          </div>
          <div id="CartDrawer-CartErrors" role="alert"></div>
        </form>
      </cart-drawer-items>
      <!-- Compact Progress Bar HTML -->
      <div class="achievement-progress">
        <div class="achievement-title">
          ⭐ ACHIEVE TARGET AND GET GIFT
        </div>
        
        <div class="progress-track">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        
        <div class="milestones">
          <div class="milestone" data-target="1000">
            <div class="milestone-marker">?</div>
            <div class="milestone-amount">1K</div>
          </div>
          
          <div class="milestone" data-target="2000">
            <div class="milestone-marker">?</div>
            <div class="milestone-amount">2K</div>
          </div>
          
          <div class="milestone" data-target="3000">
            <div class="milestone-marker">?</div>
            <div class="milestone-amount">3K</div>
          </div>
          
          <div class="milestone" data-target="5000">
            <div class="milestone-marker">?</div>
            <div class="milestone-amount">5K</div>
          </div>
          
          <div class="milestone" data-target="7000">
            <div class="milestone-marker">?</div>
            <div class="milestone-amount">7K</div>
          </div>
          
          <div class="milestone" data-target="10000">
            <div class="milestone-marker">?</div>
            <div class="milestone-amount">10K</div>
          </div>
        </div>
        
        <div class="current-amount">
          <div><span class="amount" id="currentAmount">৳0</span> / <span id="remainingAmount">৳10,000</span></div>
          <div class="next-goal" id="nextGoal">Start shopping to unlock gifts!</div>
        </div>
      </div>
      <div class="drawer__footer">
        {%- if settings.show_cart_note -%}
          <details id="Details-CartDrawer">
            <summary>
              <span class="summary__title">
                {{ 'sections.cart.note' | t }}
                {{- 'icon-caret.svg' | inline_asset_content -}}
              </span>
            </summary>
            <cart-note class="cart__note field">
              <label class="visually-hidden" for="CartDrawer-Note">{{ 'sections.cart.note' | t }}</label>
              <textarea
                id="CartDrawer-Note"
                class="text-area text-area--resize-vertical field__input"
                name="note"
                placeholder="{{ 'sections.cart.note' | t }}"
              >{{ cart.note }}</textarea>
            </cart-note>
          </details>
        {%- endif -%}

        <!-- Start blocks -->
        <!-- Subtotals -->

        <div class="cart-drawer__footer" {{ block.shopify_attributes }}>
           <div class="essential-upsell-cross-sell-block"></div>
          <div>
            {%- if cart.cart_level_discount_applications.size > 0 -%}
              <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                {%- for discount in cart.cart_level_discount_applications -%}
                  <li class="discounts__discount discounts__discount--end">
                    {{- 'icon-discount.svg' | inline_asset_content -}}
                    {{ discount.title | escape }}
                    (-{{ discount.total_allocated_amount | money }})
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </div>

          <div class="totals" role="status">
            <h2 class="totals__total">{{ 'sections.cart.estimated_total' | t }}</h2>
            <p class="totals__total-value">{{ cart.total_price | money_with_currency }}</p>
          </div>

          <small class="tax-note caption-large rte">
            {%- if cart.duties_included and cart.taxes_included -%}
              {%- if shop.shipping_policy.body == blank -%}
                {{ 'sections.cart.duties_and_taxes_included_shipping_at_checkout_without_policy' | t }}
              {%- else -%}
                {{
                  'sections.cart.duties_and_taxes_included_shipping_at_checkout_with_policy_html'
                  | t: link: shop.shipping_policy.url
                }}
              {%- endif -%}
            {%- elsif cart.duties_included == false and cart.taxes_included -%}
              {%- if shop.shipping_policy.body == blank -%}
                {{ 'sections.cart.taxes_included_shipping_at_checkout_without_policy' | t }}
              {%- else -%}
                {{
                  'sections.cart.taxes_included_shipping_at_checkout_with_policy_html'
                  | t: link: shop.shipping_policy.url
                }}
              {%- endif -%}
            {%- elsif cart.duties_included and cart.taxes_included == false -%}
              {%- if shop.shipping_policy.body == blank -%}
                {{ 'sections.cart.duties_included_taxes_at_checkout_shipping_at_checkout_without_policy' | t }}
              {%- else -%}
                {{
                  'sections.cart.duties_included_taxes_at_checkout_shipping_at_checkout_with_policy_html'
                  | t: link: shop.shipping_policy.url
                }}
              {%- endif -%}
            {%- elsif cart.duties_included == false and cart.taxes_included == false -%}
              {%- if shop.shipping_policy.body == blank -%}
                {{ 'sections.cart.taxes_at_checkout_shipping_at_checkout_without_policy' | t }}
              {%- else -%}
                {{
                  'sections.cart.taxes_at_checkout_shipping_at_checkout_with_policy_html'
                  | t: link: shop.shipping_policy.url
                }}
              {%- endif -%}
            {%- endif -%}
          </small>
        </div>

        <!-- CTAs -->
       

        <div class="cart__ctas" {{ block.shopify_attributes }}>
          <button
            type="submit"
            id="CartDrawer-Checkout"
            class="cart__checkout-button button"
            name="checkout"
            form="CartDrawer-Form"
            {% if cart == empty %}
              disabled
            {% endif %}
          >
            {{ 'sections.cart.checkout' | t }}
          </button>
        </div>
      </div>
    </div>
  </div>
</cart-drawer>
<script>
(function() {
  const achievements = [
    { target: 1000, reward: 'Get a Lid', icon: '🎁' },
    { target: 2000, reward: 'Get a Notebook', icon: '📓' },
    { target: 3000, reward: 'Get a Mug', icon: '☕' },
    { target: 5000, reward: 'Get a Tote Bag', icon: '🛍️' },
    { target: 7000, reward: 'Get a Journal', icon: '📔' },
    { target: 10000, reward: 'Premium Gift', icon: '🎀' }
  ];

  function updateProgressBar() {
    fetch('/cart.js')
      .then(response => response.json())
      .then(cart => {
        const currentTotal = cart.total_price / 100;
        performUpdate(currentTotal);
      })
      .catch(err => console.error('Cart fetch error:', err));
  }
  
  function performUpdate(currentTotal) {
    const maxTarget = 10000;
    
    const currentAmountEl = document.getElementById('currentAmount');
    if (currentAmountEl) {
      currentAmountEl.innerHTML = `<span style="color: #4CAF50;">৳${Math.round(currentTotal)}</span>`;
    }
    
    const progressPercentage = Math.min((currentTotal / maxTarget) * 100, 100);
    const progressFillEl = document.getElementById('progressFill');
    if (progressFillEl) {
      progressFillEl.style.width = progressPercentage + '%';
      
      // Remove all level classes
      progressFillEl.className = 'progress-fill';
      
      // Add dynamic color class based on amount
      if (currentTotal >= 10000) {
        progressFillEl.classList.add('max-level');
      } else if (currentTotal >= 7000) {
        progressFillEl.classList.add('level-6');
      } else if (currentTotal >= 5000) {
        progressFillEl.classList.add('level-5');
      } else if (currentTotal >= 3000) {
        progressFillEl.classList.add('level-4');
      } else if (currentTotal >= 2000) {
        progressFillEl.classList.add('level-3');
      } else if (currentTotal >= 1000) {
        progressFillEl.classList.add('level-2');
      } else if (currentTotal > 0) {
        progressFillEl.classList.add('level-1');
      }
    }
    
    const remainingAmountEl = document.getElementById('remainingAmount');
    if (remainingAmountEl) {
      const remaining = Math.max(0, maxTarget - currentTotal);
      remainingAmountEl.innerHTML = `<span style="color: #FF6B6B;">৳${Math.round(remaining)}</span>`;
    }
    
    const milestones = document.querySelectorAll('.milestone');
    let nextGoalText = '';
    let hasActiveGoal = false;
    
    milestones.forEach((milestone, index) => {
      if (index >= achievements.length) return;
      
      const target = achievements[index].target;
      const marker = milestone.querySelector('.milestone-marker');
      const amount = milestone.querySelector('.milestone-amount');
      
      if (!marker) return;
      
      milestone.classList.remove('active', 'completed');
      
      if (currentTotal >= target) {
        milestone.classList.add('completed');
        marker.textContent = achievements[index].icon;
        if (amount) amount.style.color = '#4CAF50';
      } else if (!hasActiveGoal && currentTotal >= target * 0.7) {
        milestone.classList.add('active');
        hasActiveGoal = true;
        const remaining = target - currentTotal;
        nextGoalText = `${Math.round(remaining)}৳ more for ${achievements[index].reward}`;
        if (amount) amount.style.color = '#FFB030';
      } else {
        marker.textContent = '?';
        if (amount) amount.style.color = 'rgba(255, 255, 255, 0.5)';
      }
    });
    
    if (currentTotal >= maxTarget) {
      nextGoalText = '🎉 All goals unlocked!';
    } else if (!hasActiveGoal) {
      const nextTarget = achievements.find(a => a.target > currentTotal);
      if (nextTarget) {
        const remaining = nextTarget.target - currentTotal;
        nextGoalText = `${Math.round(remaining)}৳ more for ${nextTarget.reward}`;
      }
    }
    
    const nextGoalEl = document.getElementById('nextGoal');
    if (nextGoalEl) {
      nextGoalEl.textContent = nextGoalText;
    }
  }

  function init() {
    updateProgressBar();
    
    if (typeof Shopify !== 'undefined') {
      document.addEventListener('shopify:section:load', updateProgressBar);
      document.addEventListener('shopify:section:reorder', updateProgressBar);
    }
    
    document.addEventListener('cart:updated', updateProgressBar);
    document.addEventListener('cart:refresh', updateProgressBar);
    
    const originalFetch = window.fetch;
    window.fetch = function(...args) {
      const url = args[0];
      if (typeof url === 'string' && (url.includes('/cart/') || url.includes('/cart.js'))) {
        return originalFetch.apply(this, args).then(response => {
          setTimeout(updateProgressBar, 100);
          return response;
        });
      }
      return originalFetch.apply(this, args);
    };
    
    document.addEventListener('click', function(e) {
      const quantityBtn = e.target.closest('.quantity__button');
      const removeBtn = e.target.closest('cart-remove-button');
      
      if (quantityBtn || removeBtn) {
        setTimeout(updateProgressBar, 500);
      }
    });
    
    document.addEventListener('change', function(e) {
      if (e.target.classList.contains('quantity__input')) {
        setTimeout(updateProgressBar, 500);
      }
    });
    
    setInterval(function() {
      const cartDrawer = document.querySelector('cart-drawer[open]');
      if (cartDrawer) {
        updateProgressBar();
      }
    }, 2000);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>